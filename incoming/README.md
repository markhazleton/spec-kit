# Incoming Integration Plans

This directory contains evaluation folders for upstream commits that require detailed analysis before integration into Spec Kit Spark.

## Purpose

When syncing with upstream `github/spec-kit`, some commits:
- Are good ideas but need adaptation for Spec Kit Spark
- Require architectural discussion before integration
- Need testing in isolation before merging
- May conflict with Spark-specific enhancements

Rather than cherry-picking immediately or deferring indefinitely, the **Plan** option creates a dedicated evaluation folder here.

## Structure

Each commit gets its own folder named by commit hash:

```
incoming/
├── README.md (this file)
└── <commit-hash>/
    └── integration-plan.md
```

## Integration Plan Template

Each `integration-plan.md` includes:

1. **Commit Metadata**: Full upstream commit details, author, dates, PR links
2. **Files Changed**: Complete list of modified files with diff stats
3. **Integration Analysis**:
   - What does this change do?
   - Relevance to Spec Kit Spark
   - Conflicts & dependencies
   - Adaptation strategy
   - Testing & validation plan
   - Impact assessment
4. **Decision & Next Steps**: Approval, modification, rejection, or deferral
5. **Full Diff**: Complete code changes for reference

## Workflow

### Creating Plans

Use interactive sync mode:
```powershell
.\scripts\powershell\sync-upstream.ps1 -Mode interactive
```

When prompted for a commit action:
- **[A]** Apply - Cherry-pick immediately
- **[S]** Skip - Ignore this commit
- **[P]** Plan - Create integration evaluation folder ⬅️
- **[D]** Defer - Add to deferred list
- **[V]** View - Show full diff
- **[Q]** Quit

### Evaluating Plans

1. Open `incoming/<commit-hash>/integration-plan.md`
2. Fill out the analysis sections
3. Make your decision: Approve/Modify/Reject/Defer
4. Add action items and timeline
5. Execute when ready

### After Integration

Once a plan is executed:
- Delete the commit's folder: `rm -r incoming/<commit-hash>`
- Or keep for reference if helpful
- Plans are gitignored automatically

## Tips

- **Fill out the checklist**: Use the checkboxes to track progress
- **Document reasoning**: Future maintainers will thank you
- **Test in isolation**: Create a test branch before applying
- **Update FORK_DIVERGENCE.md**: Record integration decisions
- **Share decisions**: Discuss complex integrations with team

## Example Workflow

```powershell
# 1. Sync and create plan
.\scripts\powershell\sync-upstream.ps1 -Mode interactive
# Choose [P] Plan for commit abc123

# 2. Evaluate
code incoming/abc123/integration-plan.md
# Fill out analysis sections

# 3. Test (if approved)
git checkout -b test-abc123-integration
git cherry-pick abc123
# Run tests, verify changes

# 4. Integrate (if successful)
git checkout main
git merge test-abc123-integration

# 5. Cleanup
rm -r incoming/abc123
```

## Notes

- All folders in `incoming/*/` are gitignored (except this README)
- Plans are local to your workspace
- Safe to delete folders after integration
- Useful for tracking "good ideas that need work"

---

**Generated by**: `sync-upstream.ps1`  
**Part of**: Spec Kit Spark Fork Maintenance  
**Related**: [FORK_DIVERGENCE.md](../FORK_DIVERGENCE.md), [sync-upstream.ps1](../scripts/powershell/sync-upstream.ps1)
